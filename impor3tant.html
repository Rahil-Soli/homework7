<!--how create a store -->
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}
</style>
</head>
<body>
<div id="products" style="display: flex;flex-wrap: wrap;">


</div>




<script>
let products=[{
id : 105,
title : 'this is product 1',
img:'download (1).jpeg',
price : 2500,
description : 'Lorem ipsum dolor sit amet.',
inventory:25
},{
id: 204,
title : 'this is product 2',
img: 'download (1).jpeg',
price : 3200,
description : 'Lorem ipsum dolor sit amet12.',
inventory:12
},{
id:32,
title : 'this is product 3',
img: 'download (1).jpeg', 
price : 3900,
description : 'Lorem ipsum dolor sit ametfhgh ghfgh fg.',
inventory:52
}];

let cart=[];
products.forEach(function(item){
document.getElementById('products').innerHTML+=`
<div class="product" style="width: 33%;border: 1px solid lightgray;">
<img src="${item.img}" alt="" style="width: 100%;">
<h2>${item.title}</h2>
<p>${item.description}</p>
<p>price : ${item.price}</p>
<p>inventry : ${item.inventory}</p>
<button onclick="addToCart(${item.id})" style="width: 100%; background-color: lightblue;color:white;border: none;padding: 5px 10px;">+</button>
<input value="0" data-product-count="${item.id}">
<button onclick="removeFromCart(${item.id})" style="width: 100%; background-color: lightblue;color:white;border: none;padding: 5px 10px;">-</button>
</div>`
})

function addToCart(id){
let index=cart.findIndex(function(item){
return item.product_id == id
});
let p=getProductById(id)
if(index==-1){
cart.push({
product_id :id,
product_title : p.title,
product_price : p.price,
count: 1,
total_price : p.price
});
document.querySelector(`[data-product-count="${p.id}"]`).value = 1 ;
}else {
cart[index].count+=1;
cart[index].total_price=cart[index].count*cart[index].product_price;
document.querySelector(`[data-product-count="${p.id}"]`).value = cart[index].count;
}


console.log(cart);
}
function removeFromCart(id){
  let index=cart.findIndex(function(item){
    return item.product_id == id
  });
  if(index == -1){
    alert('inventory is 0');
  }else {
    if(cart[index].count==1){
      document.querySelector(`[data-product-count="${p.id}"]`).value = 0;
      cart.splice(index,1)
     
    }else{
      if(count =-1){

      }else
      cart[index].count-=1;
      cart[index].total_price=cart[index].count*cart[index].product_price;
      document.querySelector(`[data-product-count="${p.id}"] `).value = cart[index]-count;
    }
  }
}

function getProductById(id){
let index=products.findIndex(function(item){
return item.id==id
})
return products[index];
}

document.getElementById("inventory").addEventListener("submit", function(event) {
      event.preventDefault();
      var productsInput = parseInt(document.getElementById("products").value);
      var inventoryInfo = document.getElementById("inventory-info");

      if (productsInput > 5) {
        p = "The inventory is 0";
      } else {
        inventoryInfo.textContent = "The inventory is " + productsInput;
      }
    });

</script>

<script>

</script>
</body>
</html>